<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script>

        function InitFactory(libname) {
            return function () {
                // this is the init function
                // get all the module names as strings
                var modules = str.split('.');

                // check if the first module name is the library itself
                if (modules[0] === libname) {
                    modules.splice(0, 1);
                }

                // set the variable to the library
                var self = this;

                // loop over the modules
                return modules.reduce(function (parent, modulename) {
                    if (!(modulename in parent)) {
                        parent[modulename] = {};
                    }
                    parent = parent[modulename];
                    return parent;
                }, self);
            }
        }

        // Namespace pattern
        var lib = {
            init: InitFactory('lib')
/*            init: function (str) {
                // get all the module names as strings
                var modules = str.split('.');

                // check if the first module name is the library itself
                if (modules[0] === 'lib') {
                    modules.splice(0, 1);
                }

                // set the variable to the library
                var self = this;

                // loop over the modules
                return modules.reduce(function (parent, modulename) {
                    if (!(modulename in parent)) {
                        parent[modulename] = {};
                    }
                    parent = parent[modulename];
                    return parent;
                }, self);
            }*/
        };



        // Test case 1
        lib.init('lib.basic.security.cors').checksop = function () {
            console.log('checking same origin policy ... ');
        };

        lib.basic.security.cors.checksop();
        console.log(lib);

    </script>
</head>
<body>

</body>
</html>